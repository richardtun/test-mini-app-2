<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click Counter Mini App</title>
    <!-- Tải Tailwind CSS CDN để tạo giao diện đẹp và responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Tải font Inter cho giao diện hiện đại */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <!-- Thẻ meta này có thể cần thiết cho một số Client Farcaster cũ, 
         nhưng Mini App chủ yếu dựa trên HTML/JS chuẩn. -->
    <meta property="fc:frame" content="vNext" /> 
    
    <div id="app" class="w-full max-w-sm bg-white p-6 rounded-xl shadow-2xl border border-gray-200">
        <h1 class="text-3xl font-extrabold text-center text-blue-700 mb-2">Counter Mini-Game</h1>
        <p class="text-center text-gray-500 mb-6 text-sm">App run on Client-Side (no need server)</p>

        <!-- Khu vực hiển thị kết quả -->
        <div id="display" class="bg-blue-50 p-6 rounded-lg mb-8 text-center border-2 border-blue-200 shadow-inner">
            <p id="message" class="text-xl font-semibold text-gray-700 transition duration-300">Let's click!</p>
            <p class="text-6xl font-black text-blue-600 mt-3"><span id="count-value">0</span></p>
        </div>

        <!-- Nút Nhấp (Click Button) -->
        <button id="click-button" class="w-full py-4 text-white font-bold rounded-xl shadow-lg transition duration-150 transform hover:scale-[1.01] bg-green-500 hover:bg-green-600 active:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-300">
            Click here (0 / 5)
        </button>

        <!-- Nút Chơi Lại (Reset Button) -->
        <button id="reset-button" class="w-full py-3 mt-4 bg-gray-200 text-gray-700 font-semibold rounded-xl transition duration-150 transform hover:bg-gray-300 hidden">
            Replay
        </button>
    </div>
</body>
<script>
    // Logic của Game
    const MAX_CLICKS = 5;
    let clickCount = 0;

    const countValue = document.getElementById('count-value');
    const message = document.getElementById('message');
    const clickButton = document.getElementById('click-button');
    const resetButton = document.getElementById('reset-button');

    // Hàm cập nhật giao diện người dùng
    function updateUI() {
        countValue.textContent = clickCount;

        if (clickCount >= MAX_CLICKS) {
            // Trạng thái Game Over
            message.textContent = 'COMPLETED! You clicked 5 times.';
            clickButton.classList.add('opacity-50', 'cursor-not-allowed', 'bg-red-500');
            clickButton.classList.remove('bg-green-500', 'hover:bg-green-600');
            clickButton.disabled = true;
            clickButton.textContent = 'Completed goal!';
            resetButton.classList.remove('hidden');
        } else if (clickCount > 0) {
            // Trạng thái đang chơi
            message.textContent = `You clicked ${clickCount} times. Let's try!`;
            clickButton.textContent = `Click here (${clickCount} / ${MAX_CLICKS})`;
            clickButton.classList.remove('bg-red-500');
            clickButton.classList.add('bg-green-500', 'hover:bg-green-600');
        } else {
            // Trạng thái ban đầu
            message.textContent = 'Begin click!';
            clickButton.textContent = `Click here (0 / ${MAX_CLICKS})`;
            clickButton.classList.remove('opacity-50', 'cursor-not-allowed', 'bg-red-500');
            clickButton.classList.add('bg-green-500', 'hover:bg-green-600');
            clickButton.disabled = false;
        }
    }

    // Xử lý sự kiện khi nhấp nút Click
    function handleButtonClick() {
        if (clickCount < MAX_CLICKS) {
            clickCount++;
            updateUI();
        }
    }

    // Xử lý sự kiện khi nhấp nút Reset
    function handleResetClick() {
        clickCount = 0;
        resetButton.classList.add('hidden');
        updateUI();
    }

    // Gắn lắng nghe sự kiện khi tài liệu đã tải xong
    document.addEventListener('DOMContentLoaded', () => {
        clickButton.addEventListener('click', handleButtonClick);
        resetButton.addEventListener('click', handleResetClick);
        updateUI(); // Thiết lập hiển thị ban đầu
    });
</script>
</html>

